(this["webpackJsonpmodular-ramp"]=this["webpackJsonpmodular-ramp"]||[]).push([[0],{104:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return m}));var r=n(3),a=n.n(r),c=n(30),o=n(102),s=n(58),u=n(113),i=n(266),l={testnet:"0x6cA13a4ab78dd7D657226b155873A04DB929A3A4",mainnet:"0xa47c8bf37f92aBed4A126BDA807A7b7498661acD"},d=function(t){try{var n=u.bech32.decode(t).words,r=u.bech32.fromWords(n);return"0x"+e.from(r).toString("hex")}catch(a){return""}};function b(e,t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.ethereumContext,r=n.terraContext,c=r.address,e.abrupt("return",{type:"shuttleBurn",shuttleBurnArgs:{toAddress:c,ustAmount:t}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(t,n){var r,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.onProgress,c=void 0===r?function(){}:r,o=n.ethereumContext,e.t0=t.type,e.next="tx"===e.t0?4:"shuttleBurn"===e.t0?19:22;break;case 4:if(o.signer){e.next=6;break}throw new Error("Missing signer");case 6:return c("Initiating transaction..."),e.prev=7,e.next=10,o.signer.sendTransaction(t.txArg);case 10:return s=e.sent,c("Transaction successful"),e.abrupt("return",s);case 15:throw e.prev=15,e.t1=e.catch(7),c("Transaction failed ".concat(e.t1)),e.t1;case 19:if(t.shuttleBurnArgs){e.next=21;break}throw new Error("Missing args");case 21:return e.abrupt("return",j(t.shuttleBurnArgs,{ethereumContext:o,onProgress:c}));case 22:throw new Error("Unreachable code reached due to ".concat(t));case 24:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function j(e,t){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(a.a.mark((function e(t,n){var r,c,u,b,f,p,h,j,x,m,w,O,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.toAddress,c=t.ustAmount,u=n.onProgress,b=void 0===u?function(){}:u,f=n.ethereumContext,p=f.signer,h=f.networkType,r&&c&&h){e.next=5;break}return e.abrupt("return");case 5:if(p){e.next=7;break}return e.abrupt("return");case 7:return j=new o.a.Contract(l[h],i.a,p),x=d(r),m=s.utils.parseUnits(c,18),e.prev=10,w=j.burn(m,x.padEnd(66,"0")),b("Initiating transaction..."),e.next=15,w;case 15:return O=e.sent,v=O.hash,b("Transaction successful."),e.abrupt("return",{success:!0,hash:v});case 21:throw e.prev=21,e.t0=e.catch(10),e.t0;case 24:case"end":return e.stop()}}),e,null,[[10,21]])})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ethereumContext,r=n.provider,c=n.publicAddress,o=n.networkType,c){e.next=4;break}throw new Error("No public address of ethereum wallet");case 4:if(r){e.next=6;break}throw new Error("No provider");case 6:if(o){e.next=8;break}throw new Error("No network type selected");case 8:return e.abrupt("return",new Promise((function(e){var t=l[o];console.debug("Waiting for contract (".concat(t,") transfer() activity to "),c);var n={address:t,topics:[s.utils.id("Transfer(address,address,uint256)"),s.utils.hexZeroPad("0x0",32),s.utils.hexZeroPad(c,32)]};r.once(n,(function(t,n){var r=t.data,a=s.utils.formatEther(r);e(a)}))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(32).Buffer)},119:function(e,t){},266:function(e,t,n){"use strict";t.a=["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function earned(address account) public view returns (uint256)","function allowance(address owner, address spender) external view returns (uint256)","function totalSupply() public view returns (uint256)","function currentReward() public view returns (uint256)","function lastTimeRewardApplicable() public view returns (uint256)","function rewardPerToken() public view returns (uint256)","function transfer(address to, uint amount) returns (boolean)","function burn(uint256 amount, bytes32 to) returns (boolean)","function approve(address spender, uint256 amount) external returns (bool)","function stake(uint256 amount) external","function withdraw(uint256 amount) external","function getReward() external","function claim(uint256 index, address account, uint256 amount, bytes32[] calldata merkleProof) external","event Transfer(address indexed from, address indexed to, uint amount)"]},287:function(e,t){},365:function(e,t){},367:function(e,t){},377:function(e,t){},379:function(e,t){},391:function(e,t){},393:function(e,t){},470:function(e,t){},472:function(e,t){},478:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(260),o=n.n(c),s=n(274),u=n(515),i=n(508),l=n(499),d=n(513),b=n(11),f=n(501),p=n(503),h={terra:"Terra",ethereum:"Ethereum",bsc:"Binance Smart Chain"},j=["ethereum","terra"],x={testnet:"Testnet: Ropsten / Tequila",mainnet:"Main Net"},m=["testnet","mainnet"],w="testnet",O={mainnet:"columbus-4",testnet:"tequila-0004"},v={mainnet:{mantle:"https://mantle.terra.dev/",shuttle:{ethereum:"terra13yxhrk08qvdf5zdc9ss5mwsg5sf7zva9xrgwgc",bsc:"terra1g6llg3zed35nd3mh9zx6n64tfw3z67w2c48tn2"},fcd:"https://fcd.terra.dev",lcd:"https://lcd.terra.dev"},testnet:{mantle:"https://tequila-mantle.terra.dev/",shuttle:{ethereum:"terra10a29fyas9768pw8mewdrar3kzr07jz8f3n73t3",bsc:"terra1paav7jul3dzwzv78j0k59glmevttnkfgmgzv2r"},fcd:"https://tequila-fcd.terra.dev",lcd:"https://tequila-lcd.terra.dev"}},g=n(3),k=n.n(g),C=n(30),y=n(58),S=n(102),T=n(261),A=n.n(T),E=["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function transfer(address to, uint amount) returns (boolean)","event Transfer(address indexed from, address indexed to, uint amount)"],B=n(10),P={testnet:"0x3",mainnet:"0x1"},N={testnet:"0x6cA13a4ab78dd7D657226b155873A04DB929A3A4",mainnet:"0xa47c8bf37f92aBed4A126BDA807A7b7498661acD"},D=Object(r.createContext)({USTBalance:null,publicAddress:null,provider:null,signer:null,refreshBalance:function(){},networkType:null});var I="eth_connected";function U(e){var t=e.networkType,n=e.onChange,a=Object(r.useState)(null),c=Object(b.a)(a,2),o=c[0],s=c[1],u=Object(r.useState)(null),i=Object(b.a)(u,2),f=i[0],p=i[1],h=Object(r.useState)(null),j=Object(b.a)(h,2),x=j[0],m=j[1],w=Object(r.useState)(null),O=Object(b.a)(w,2),v=O[0],g=O[1],T=Object(r.useState)(!0),D=Object(b.a)(T,2),U=D[0],z=D[1];Object(r.useEffect)((function(){!function(){F.apply(this,arguments)}(),sessionStorage.getItem(I)===I&&M()}),[]),Object(r.useEffect)((function(){var e=!1;return Object(C.a)(k.a.mark((function n(){var r,a,c,s,u;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v&&(null===v||void 0===v?void 0:v.provider)&&o&&U){n.next=2;break}return n.abrupt("return");case 2:return r=v.provider,n.prev=3,a=new S.a.Contract(N[t],E,r),n.next=7,a.balanceOf(o);case 7:return c=n.sent,n.next=10,a.decimals();case 10:return s=n.sent,n.next=13,a.symbol();case 13:if(u=n.sent,!e){n.next=16;break}return n.abrupt("return");case 16:p({balance:c,decimals:s,symbol:u}),z(!1),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(3),console.error(n.t0);case 23:case"end":return n.stop()}}),n,null,[[3,20]])})))(),function(){e=!0}}),[v,o,U,t]),Object(r.useEffect)((function(){n({USTBalance:f,publicAddress:o,provider:(null===v||void 0===v?void 0:v.provider)||null,signer:(null===v||void 0===v?void 0:v.signer)||null,refreshBalance:J,networkType:t})}),[n,f,o,v,t]);var R,q=x!==P[t];return Object(B.jsxs)(l.a,{children:[Object(B.jsxs)(d.a,{onClick:M,disabled:Boolean(o),children:[o?"Connected":"Connect"," to Ethereum"]}),q?Object(B.jsx)(l.a,{ps:2,color:"red",children:"Network mismatch."}):null,Object(B.jsx)(l.a,{ps:2,children:Object(B.jsxs)("small",{children:[o,f?Object(B.jsx)("div",{children:Object(B.jsxs)("pre",{children:[(R=f,R&&y.utils.formatUnits(R.balance,R.decimals)||"")," UST"]})}):null]})})]});function F(){return(F=Object(C.a)(k.a.mark((function e(){var n,r,a,c,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){window.location.reload()},e.next=3,A()();case 3:if((n=e.sent)?n!==window.ethereum&&console.error("Do you have multiple wallets installed?"):console.log("Please install MetaMask!"),r=window.ethereum){e.next=8;break}return e.abrupt("return");case 8:if((a=r).request){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,a.request({method:"eth_chainId"});case 13:(c=e.sent)!==P[t]&&console.error("Network chosen does not match Eth network"),m(c),a.on("chainChanged",o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return W.apply(this,arguments)}function W(){return(W=Object(C.a)(k.a.mark((function e(){var t,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return t=new S.a.providers.Web3Provider(window.ethereum),n=t.getSigner(),g({provider:t,signer:n}),e.next=7,t.send("eth_requestAccounts",[]);case 7:return e.next=9,n.getAddress();case 9:r=e.sent,s(r),sessionStorage.setItem(I,I);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){z(!0)}}var z=n(52),R=1e6;function q(e){return e?new z.Dec(e.amount).div(R).toString().replace(/\.?0+$/,""):""}var F=n(74),M=new z.Coin("uusd",new z.Int(1e6));function W(e,t){return J.apply(this,arguments)}function J(){return(J=Object(C.a)(k.a.mark((function e(t,n){var r,a,c,o,s,u,i,l,d,b,f,p,h,j,x,m,w;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.ethereumContext,a=n.terraContext,c=a.address,o=a.networkType){e.next=4;break}throw new Error("No network type selected.");case 4:if(c){e.next=6;break}throw new Error("No address found.");case 6:if(r.publicAddress){e.next=8;break}throw new Error("No Ethereum address found.");case 8:return s=new z.Coin("uusd",new z.Dec(t).mul(R).toInt()),u=new z.MsgSend(c,v[o].shuttle.ethereum,new z.Coins([s])),i=.15,l={msgs:[u],memo:r.publicAddress,gasPrices:new z.Coins({uusd:i})},d=G(a),e.next=15,d.tx.create(c,l);case 15:return b=e.sent,e.next=18,d.tx.estimateFee(b);case 18:return f=e.sent,console.log("estimated gas needed",f.gas),e.next=22,d.utils.calculateTax(s);case 22:return p=e.sent,h=new z.Int(f.gas).mul(i).ceil(),j=p.add(h),x=s.mul(.001),m=x.amount.lessThan(M.amount)?M:x,w=new z.StdFee(f.gas,[j]),e.abrupt("return",{network:"terra",amount:s,estTx:l,estFees:w,relayingFee:m,estOutputAmount:q(s.sub(m))});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return _.apply(this,arguments)}function _(){return(_=Object(C.a)(k.a.mark((function e(t,n){var r,a,c,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.onProgress,a=void 0===r?function(){}:r,c=n.terraContext,o=c.extension,t&&o){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e,n){o.post(Object(F.a)(Object(F.a)({},t.estTx),{},{fee:t.estFees})),o.once("onPost",(function(t){if(t.error)return n(t),void a("Transaction failed.");console.log(t),e(t),a("Transaction ID: ".concat(t.id,", Success: ").concat(t.success))})),a("Posting transaction...")})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(C.a)(k.a.mark((function e(t){var n,r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.terraContext;case 1:if(null===(a=r)||void 0===a?void 0:a.balanceHasChanged){e.next=10;break}return console.debug("Waiting, no change"),e.next=5,H(5e3);case 5:return e.next=7,n.refreshBalance();case 7:r=e.sent,e.next=1;break;case 10:return console.debug("Done waiting"),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){var t=e.networkType;if(!t)throw new Error("No network type selected.");var n=v[t].lcd,r=O[t];return new z.LCDClient({URL:n,chainID:r})}var K=Object(r.createContext)({extension:null,address:null,balance:null,refreshBalance:function(){},networkType:null}),Q="terra_connected";function V(e){var t=e.networkType,n=e.onChange,a=Object(r.useState)(null),c=Object(b.a)(a,2),o=c[0],s=c[1],u=Object(r.useState)(null),i=Object(b.a)(u,2),f=i[0],p=i[1],h=Object(r.useState)(null),j=Object(b.a)(h,2),x=j[0],m=j[1],w=Object(r.useState)(null),O=Object(b.a)(w,2),g=O[0],y=O[1],S=Object(r.useState)(null),T=Object(b.a)(S,2),A=T[0],E=T[1];Object(r.useEffect)((function(){sessionStorage.getItem(Q)===Q&&D()}),[]),Object(r.useEffect)((function(){I()}),[f,t]),Object(r.useEffect)((function(){var e=!1;if(A&&f)return Object(C.a)(k.a.mark((function n(){var r,a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G({networkType:t}).bank.balance(f);case 2:if(r=n.sent,!e){n.next=5;break}return n.abrupt("return");case 5:(a=(null===x||void 0===x?void 0:x.toJSON())!==r.toJSON())&&m(r),A.resolve({balanceHasChanged:a}),E(null);case 9:case"end":return n.stop()}}),n)})))(),function(){e=!0}}),[A,f,x,t]),Object(r.useEffect)((function(){g&&v[t].lcd!==g.lcd&&console.error("Network chosen does not match Terra extension network"),n({extension:o,address:f,balance:x,networkType:t,refreshBalance:I})}),[n,o,f,x,t,g]);var P=x&&x.get("uusd"),N=g&&v[t].lcd!==g.lcd;return Object(B.jsxs)(l.a,{children:[Object(B.jsxs)(d.a,{onClick:D,disabled:Boolean(f),children:[f?"Connected":"Connect"," to Terra"]}),N?Object(B.jsx)(l.a,{ps:2,color:"red",children:"Network mismatch."}):null,Object(B.jsx)(l.a,{ps:2,children:Object(B.jsxs)("small",{children:[f,P?Object(B.jsx)("div",{children:Object(B.jsxs)("pre",{children:[q(P)," UST"]})}):null]})})]});function D(){var e=new z.Extension;e.connect(),e.on("onConnect",(function(t){p(t.address),e.info(),e.on("onInfo",(function(e){y(e)}))})),s(e),sessionStorage.setItem(Q,Q)}function I(){return U.apply(this,arguments)}function U(){return(U=Object(C.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e){E((function(n){return null===n||void 0===n||n.resolve(t),{resolve:e}}))})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}function X(e){var t=e.children,n=Object(r.useState)(w),a=Object(b.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)({extension:null,address:null,balance:null,refreshBalance:function(){},networkType:w}),u=Object(b.a)(s,2),i=u[0],d=u[1],h=Object(r.useState)({USTBalance:null,publicAddress:null,provider:null,signer:null,refreshBalance:function(){},networkType:w}),j=Object(b.a)(h,2),O=j[0],v=j[1];return Object(B.jsxs)(l.a,{children:[Object(B.jsxs)(l.a,{p:4,shadow:"md",borderWidth:"1px",borderRadius:"md",m:5,children:[Object(B.jsx)(l.a,{children:Object(B.jsx)(f.a,{mb:2,value:c,onChange:function(e){return o(e.target.value)},borderColor:"mainnet"===c?"red.500":void 0,bg:"mainnet"===c?"red.500":"transparent",children:m.map((function(e){return Object(B.jsx)("option",{value:e,children:x[e]},e)}))})}),Object(B.jsxs)(p.a,{justify:"space-evenly",children:[Object(B.jsx)(p.b,{children:Object(B.jsx)(U,{networkType:c,onChange:v})}),Object(B.jsx)(p.b,{children:Object(B.jsx)(V,{networkType:c,onChange:d})})]})]}),Object(B.jsx)(l.a,{children:Object(B.jsx)(K.Provider,{value:i,children:Object(B.jsx)(D.Provider,{value:O,children:t})})})]})}var ee=n(25),te=n(6),ne=n(117),re=n(504),ae=n(505),ce=n(506),oe=n(507),se=n(514),ue=n(511),ie=n(509),le=n(104),de="0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48";function be(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(C.a)(k.a.mark((function e(t,n){var r,a,c,o,s,u,i,l,d,b;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.amountString,a=t.inputCurrency,c=t.outputCurrency,o=n.ethereumContext,s=o.publicAddress,"UST"===a&&"USDC"===c){e.next=5;break}throw new Error("Unsupported currencies, only UST to USDC is supported. You requested ".concat(a," -> ").concat(c));case 5:return u=le.c.mainnet,de,i=y.utils.parseEther(r),l=s,.5,d="https://api.1inch.exchange/v3.0/1/approve/calldata?amount=".concat(i,"&tokenAddress=").concat(u),fetch(d).then((function(e){return e.json()})).then((function(e){console.log("approval request",e)})),!0,b="https://api.1inch.exchange/v3.0/1/swap?fromTokenAddress=".concat(u,"&toTokenAddress=").concat("0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","&amount=").concat(i,"&fromAddress=").concat(l,"&slippage=").concat(.5).concat("&disableEstimate=true"),e.abrupt("return",fetch(b).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.tx,n=e.fromToken,r=e.fromTokenAmount,a=e.toToken,c=e.toTokenAmount;delete t.gas,delete t.gasPrice;var o="0x"+parseInt(t.value).toString(16);return t.value=o,{info:{fromToken:n,fromTokenAmount:r,toToken:a,toTokenAmount:c},args:{type:"tx",txArg:t}}})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=function e(){Object(te.a)(this,e),this.network=null,this.currency=null,this.amount=null};function he(){var e=Object(r.useState)([new pe]),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),o=Object(b.a)(c,2),s=o[0],i=o[1];return Object(B.jsx)(l.a,{p:4,shadow:"md",borderWidth:"1px",borderRadius:"md",m:5,children:Object(B.jsxs)(u.c,{divider:Object(B.jsx)(u.b,{borderColor:"gray.200"}),spacing:4,children:[n.map((function(e,t){return 0===t?Object(B.jsx)(l.a,{children:Object(B.jsx)(je,{output:e,onChange:function(e){return a([e].concat(Object(ee.a)(n.slice(1))))},onAddStep:function(){return a([].concat(Object(ee.a)(n.slice(0,t+1)),[new pe],Object(ee.a)(n.slice(t+1))))}})},0):Object(B.jsx)(xe,{stepNumber:t-1,input:n[t-1],output:e,onChange:function(e){return a([].concat(Object(ee.a)(n.slice(0,t)),[e],Object(ee.a)(n.slice(t+1))))},onAddStep:function(){return a([].concat(Object(ee.a)(n.slice(0,t+1)),[new pe],Object(ee.a)(n.slice(t+1))))},onRemoveStep:function(){return a([].concat(Object(ee.a)(n.slice(0,t)),Object(ee.a)(n.slice(t+1))))},status:s[t-1]},t)})),Object(B.jsx)(me,{steps:n,onStatusesChange:i})]})})}function je(e){var t=e.input,n=e.output,a=e.onChange,c=e.onAddStep,o=e.onRemoveStep,s=Object(r.useContext)(K),i=Object(r.useContext)(D),l=function(e){a(Object(F.a)(Object(F.a)({},n),{},{network:e}))},b=function(e){a(Object(F.a)(Object(F.a)({},n),{},{currency:e}))},p=function(e){a(Object(F.a)(Object(F.a)({},n),{},{amount:e}))};return Object(r.useEffect)((function(){t&&n&&ve(t,n,{terraContext:s,ethereumContext:i}).then((function(e){!n.amount&&e.info.outputAmount&&p(e.info.outputAmount)})).catch((function(e){console.debug(e)}))}),[t,n,s,i]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(u.a,{children:[Object(B.jsxs)(ne.a,{children:[Object(B.jsx)(re.a,{children:"Network"}),Object(B.jsx)(f.a,{placeholder:"Select network",value:n.network||"",onChange:function(e){return l(e.target.value)},children:j.map((function(e){return Object(B.jsx)("option",{value:e,children:h[e]},e)}))})]}),"terra"!==(null===t||void 0===t?void 0:t.network)?Object(B.jsxs)(ne.a,{children:[Object(B.jsx)(re.a,{children:"Currency"}),Object(B.jsxs)(f.a,{placeholder:"Select currency",onChange:function(e){return b(e.target.value)},children:[Object(B.jsx)("option",{children:"UST"}),Object(B.jsx)("option",{children:"USDC"})]})]}):null]}),Object(B.jsxs)(ne.a,{children:[Object(B.jsx)(re.a,{children:"Amount"}),Object(B.jsxs)(ae.a,{children:[Object(B.jsx)(ce.a,{placeholder:"Enter amount",type:"number",pr:"4.5rem",min:"0",value:n.amount||"",onChange:function(e){return p(e.target.value)}}),Object(B.jsx)(oe.a,{pointerEvents:"none",color:"gray.300",fontSize:"1.2em",width:"4.5rem",children:n.currency})]})]}),Object(B.jsxs)(u.a,{mt:5,children:[Object(B.jsx)(d.a,{onClick:c,children:"Add Step"}),o?Object(B.jsx)(d.a,{onClick:o,children:"Remove Step"}):null]})]})}function xe(e){var t=e.stepNumber,n=e.input,a=e.output,c=e.onChange,o=e.onAddStep,s=e.onRemoveStep,u=e.status,d=Object(r.useState)(""),f=Object(b.a)(d,2),p=f[0],j=f[1];return Object(r.useEffect)((function(){if(n.network&&a.network)switch(!0){case n.network!==a.network:j("Bridge ".concat(h[n.network]," to ").concat(h[a.network]));break;default:j("Step  ".concat(t+1))}}),[n,a,t]),Object(B.jsxs)(l.a,{children:[Object(B.jsx)(i.a,{size:"md",children:p}),Object(B.jsx)(je,{input:n,output:a,onAddStep:o,onRemoveStep:s,onChange:c}),u?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(se.a,{}),u]}):null]})}function me(e){var t=e.steps,n=e.onStatusesChange,a=Object(r.useContext)(K),c=Object(r.useContext)(D),o=Object(r.useState)(null),f=Object(b.a)(o,2),p=f[0],h=f[1];Object(r.useEffect)((function(){we({steps:t,terraContext:a,ethereumContext:c},h).catch((function(e){console.debug(e)}))}),[t,a,c]);var j=Object(s.c)("teal.100","teal.800");return Object(B.jsxs)(u.c,{bg:j,m:5,p:2,borderRadius:"md",align:"start",children:[Object(B.jsx)(i.a,{size:"lg",children:"Summary"}),Object(B.jsx)(d.a,{onClick:function(){return we({steps:t,terraContext:a,ethereumContext:c},h)},children:"Estimate Transaction"}),p&&Object(B.jsxs)(l.a,{children:[Object(B.jsx)(ue.a,{allowToggle:!0,children:Object(B.jsxs)(ue.c,{children:[Object(B.jsx)(ue.b,{children:Object(B.jsx)(l.a,{flex:"1",textAlign:"left",children:"Show Debug Info"})}),Object(B.jsx)(ue.d,{children:Object(B.jsx)(ie.a,{w:"500px",as:"pre",fontSize:"8",children:JSON.stringify(p,null,2)})})]})}),Object(B.jsx)(d.a,{onClick:function(){return function(e){return ke.apply(this,arguments)}({executionSteps:p,steps:t,terraContext:a,ethereumContext:c,onStatusesChange:n})},children:"Execute"})]})]})}function we(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(C.a)(k.a.mark((function e(t,n){var r,a,c,o,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.steps,a=t.terraContext,c=t.ethereumContext,o=[],s=1;case 3:if(!(s<r.length)){e.next=12;break}return e.t0=o,e.next=7,ve(r[s-1],r[s],{terraContext:a,ethereumContext:c});case 7:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 9:s++,e.next=3;break;case 12:n(o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=Object(C.a)(k.a.mark((function e(t,n,r){var a,c,o,s,u,i,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.terraContext,c=r.ethereumContext,"terra"!==t.network||"ethereum"!==n.network){e.next=10;break}if(t.amount){e.next=4;break}throw new Error("No input amount");case 4:return e.next=6,W(t.amount,{terraContext:a,ethereumContext:c});case 6:return o=e.sent,e.abrupt("return",{network:"terra",args:o,info:{outputAmount:o.estOutputAmount}});case 10:if("ethereum"!==t.network||"terra"!==n.network){e.next=19;break}if(t.amount){e.next=13;break}throw new Error("No input amount");case 13:return e.next=15,Object(le.a)(t.amount,{terraContext:a,ethereumContext:c});case 15:return s=e.sent,e.abrupt("return",{network:"eth",args:s,info:{}});case 19:if("ethereum"!==t.network||"ethereum"!==n.network){e.next=30;break}if(t.amount){e.next=22;break}throw new Error("No input amount");case 22:if(u=t.currency,i=n.currency,u&&i){e.next=26;break}throw new Error("No specified input/output currencies");case 26:return e.next=28,be({amountString:t.amount,inputCurrency:u,outputCurrency:i},{ethereumContext:c});case 28:return l=e.sent,e.abrupt("return",{network:"eth",args:l.args,info:l.info});case 30:throw new Error("Unimplemented operation ".concat(JSON.stringify(t)," to ").concat(JSON.stringify(n)));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(C.a)(k.a.mark((function e(t){var n,r,a,c,o,s,u,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.executionSteps,r=t.steps,a=t.terraContext,c=t.ethereumContext,o=t.onStatusesChange,s=[],u=k.a.mark((function e(t){var u,i,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n[t],i=t,(l=function(e){s=[].concat(Object(ee.a)(s.slice(0,i)),[e],Object(ee.a)(s.slice(i+1))),console.debug("onProgress:",e),o(s)})("Initiating step..."),e.t0=u.network,e.next="terra"===e.t0?7:"eth"===e.t0?15:27;break;case 7:return e.next=9,L(u.args,{terraContext:a,onProgress:l});case 9:return a.refreshBalance(),l("Waiting for transaction on Eth side"),e.next=13,Object(le.d)({ethereumContext:c,terraContext:a});case 13:return c.refreshBalance(),e.abrupt("break",27);case 15:if("terra"!==r[t+1].network){e.next=19;break}return l("Preparing for transaction..."),e.next=19,a.refreshBalance();case 19:return e.next=21,Object(le.b)(u.args,{ethereumContext:c,onProgress:l});case 21:if(c.refreshBalance(),"terra"!==r[t+1].network){e.next=26;break}return l("Waiting for transaction on Terra side"),e.next=26,Z({terraContext:a,ethereumContext:c});case 26:return e.abrupt("break",27);case 27:l(null);case 28:case"end":return e.stop()}}),e)})),i=0;case 4:if(!(i<n.length)){e.next=9;break}return e.delegateYield(u(i),"t0",6);case 6:i++,e.next=4;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(){var e=Object(s.b)(),t=e.colorMode,n=e.toggleColorMode;return Object(B.jsxs)("div",{className:"App",children:[Object(B.jsxs)(u.a,{pt:2,px:5,justify:"space-between",children:[Object(B.jsx)(i.a,{children:"Modular Ramp"}),Object(B.jsx)(l.a,{textAlign:"right",children:Object(B.jsxs)(d.a,{onClick:n,children:["Toggle ","light"===t?"Dark":"Light"]})})]}),Object(B.jsx)(X,{children:Object(B.jsx)(he,{})})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,516)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},Se=n(510),Te=n(512);o.a.render(Object(B.jsxs)(a.a.StrictMode,{children:[Object(B.jsx)(Se.a,{initialColorMode:"system"}),Object(B.jsx)(Te.a,{children:Object(B.jsx)(Ce,{})})]}),document.getElementById("root")),ye()}},[[478,1,2]]]);
//# sourceMappingURL=main.44388d1e.chunk.js.map